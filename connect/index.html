<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Room To Roam</title>
    <link rel="icon" href="/images/favicon.ico">
<!--"inter" font-->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
<!--CSS-->
<link rel="stylesheet" href="/connect/connect.css?v=1.1">
<!--jquery plugin-->
<script src="/scripts/jquery.min.js"></script>
<style>
  #message{color: red;}
  #contactForm *{color: white;}
  fieldset{display: flex; flex-direction: row; justify-content: space-evenly; align-items: center;}
  .fieldset-mc{display:flex; flex-direction: column;}
  .mc-answerfield{width: 100%; height: 100%; font-size: 1rem; background-color: #12171d; color: white;}
  .contact-input{width: 60%; height: 2rem;}
</style>
</head>

 
<body>

<!--make sure to use landmark elements rather than divs for sections of the page (nav, main, header, section,...)-->
<!--(ACCESSIBILITY)NOTE: BUTTONS VS ANCHORS USAGE- buttons should only be used for interactive elements/forms/modules, while anchors should be used for in-site links -->
<!--(ACCESSIBILITY)NOTE: For nav, use <nav><ul><li><a> One reason to use the <nav>, <ul>, <li> tags when building a navigation menu is that semantic markup will improve accessibility for users that require screen-readers.-->

  <header>
    <a href="/" aria-label="Home Button" id="header-link">
      <h1 id="header-h1">Room to Roam</h1>
      <img src="/images/logotreeV5.png" alt="" id="tree-img">
    
    </a>
</header>

<nav>
    <span id="topnav-label" hidden>Navigation</span>

    <button id="topnav-open" aria-expanded="false" aria-labelledby="topnav-label">
   
          <div class="hamburger-icon">
            <span class="hamburger-icon-piece"></span>
            <span class="hamburger-icon-piece"></span>
            <span class="hamburger-icon-piece"></span>
          </div>
    </button>
    
    <div id="topnav-menu" role="dialog" aria-labelledby="topnav-label">
      <button id="topnav-close" aria-label="Close"><div class="hamburger-icon"></div></button>
      <ul id="topnav">
        <li class="topnav-item">  <a class="topnav-link" id="topnav-link-home" href="/" target="_self">Home</a>  </li>
        <li class="topnav-item">  <a class="topnav-link" href="/artists/" target="_self">Artists</a>  </li>
        <li class="topnav-item">  <a class="topnav-link" href="/reviews/" target="_self">Reviews</a>  </li>
        <li class="topnav-item">  <a class="topnav-link" href="/connect/" target="_self">Connect</a>  </li>
        <li class="topnav-item">  <a class="topnav-link" href="/about-us/" target="_self">About Us</a>  </li>
      </ul>
    </div>  
</nav>


<div id="loadcontainer">
    <div class="loadscreen" tabindex="-1">
    <img tabindex="-1" alt="Graphic image of space ship" src="/images/ship.png" aria-label="Loading screen ship animation">
    </div>
</div>

<main>

  <section class="filler"></section>
<!--CONTACT FORM-->
<form id="contactForm" action="/send-email" method="POST" style="z-index: 200;">
  <fieldset>
    <legend>How do you want to be contacted?</legend>
  <div class="fieldset-mc">
    <div>
      <input type="radio" id="preferredcontact-phone" name="preferredcontact" value="phone" checked />
      <label for="phone">Phone</label>
          
    </div>
  
    <div>
      <input type="radio" id="preferredcontact-email" name="preferredcontact" value="email" />
      <label for="email">Email</label>
          
    </div>
  
    <div>
      <input type="radio" id="preferredcontact-other" name="preferredcontact" value="other" />
      <label for="other">Other</label>
          
    </div>
  </div>
    <div id="phone-input" class="contact-input">
      <input class="mc-answerfield" type="tel" id="phone-number" name="phone-number" placeholder="Phone Number"/>
    </div>
    <div id="email-input" class="contact-input" style="display: none;">
      <input class="mc-answerfield" type="email" id="email-address" name="email-address" placeholder="Email"/>
    </div>
    <div id="other-input" class="contact-input" style="display: none;">
      <input class="mc-answerfield" type="text" id="other-method" name="other-method" placeholder="Other contact information"/>
    </div>
  </fieldset>


  <fieldset>
    <legend>How can we help you?</legend>
  <div class="fieldset-mc">
    <div>
      <input type="radio" id="contactreason-artist" name="contactreason" value="artist" checked />
      <label for="phone">I'm thinking about joining the label</label>
          
    </div>
  
    <div>
      <input type="radio" id="contactreason-businessinquiry" name="contactreason" value="business" />
      <label for="email">I have a business inquiry</label>
          
    </div>
  
    <div>
      <input type="radio" id="contactreason-other" name="contactreason" value="other" />
      <label for="other">Other</label>
          <div id="reason-other-input" class="reason-input" style="display: none;">
            <input class="mc-answerfield" type="text" id="other-reason" name="other-reason" placeholder="How can we help you?"/>
          </div>
    </div>

  </fieldset>

  <div>
    <input autocomplete="off" type="text" placeholder="Your name" name="subject" required />
  </div>

  <div> 
    <textarea autocomplete="off" placeholder="Additional info" name="body" required></textarea>
  </div>

                            <div class="oh-no-hun" >
                              <input tabindex="-1" autocomplete="off" type="text" name="body2" />
                            </div>
  <div>
    <button type="submit">Send a message</button>
  </div>

</form>

<script>
  // Functionality for the "How do you want to be contacted?" section
  document.querySelectorAll('input[name="preferredcontact"]').forEach(radio => {
    radio.addEventListener('change', function() {
      document.querySelectorAll('.contact-input').forEach(input => {
        input.style.display = 'none';
      });
      
      const selectedInput = document.getElementById(this.value + '-input');
      if (selectedInput) {
        selectedInput.style.display = 'block';
      }
    });
  });

  // Initialize the display based on the default checked radio button
  document.querySelector('input[name="preferredcontact"]:checked').dispatchEvent(new Event('change'));

  // Functionality for the "How can we help you?" section
  document.querySelectorAll('input[name="contactreason"]').forEach(radio => {
    radio.addEventListener('change', function() {
      const reasonInput = document.getElementById('reason-other-input');
      
      if (this.value === 'other') {
        reasonInput.style.display = 'block';
      } else {
        reasonInput.style.display = 'none';
      }
    });
  });

  // Initialize the "How can we help you?" section based on the default checked radio button
  document.querySelector('input[name="contactreason"]:checked').dispatchEvent(new Event('change'));
</script>

<div id="message" class="message"></div>


<script>
  document.getElementById('contactForm').addEventListener('submit', async function(event) {
    event.preventDefault(); // Prevent the default form submission

    const form = event.target;
    const formData = new FormData(form);
    const messageDiv = document.getElementById('message');

    // Convert FormData to URL-encoded string
    const urlEncodedData = new URLSearchParams(formData).toString();

    try {
      const response = await fetch(form.action, {
        method: form.method,
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded', // Specify URL-encoded content type
        },
        body: urlEncodedData, // Use URL-encoded string as the body
      });

      // Ensure response is in JSON format and read it
      const contentType = response.headers.get('content-type');
      let responseJson = {};

      if (contentType && contentType.includes('application/json')) {
        try {
          responseJson = await response.json();
        } catch (jsonError) {
          console.error('Failed to parse JSON:', jsonError);
          messageDiv.innerHTML = `<p class="error">Failed to parse server response.</p>`;
          return;
        }
      } else {
        const responseText = await response.text(); // Read as text if not JSON
        console.error('Unexpected response format:', responseText);
        messageDiv.innerHTML = `<p class="error">Unexpected response format. Response: ${responseText}</p>`;
        return;
      }

      if (response.ok) {
        // Display success message
        messageDiv.innerHTML = `<p class="success">${responseJson.message || 'Email sent successfully!'}</p>`;
        // Reset the form after successful submission
        form.reset();
      } else {
        // Handle and display validation errors
        const errors = responseJson.errors || [{ msg: 'An unknown error occurred.' }];
        messageDiv.innerHTML = `<p class="error">${errors.map(err => err.msg).join(', ')}</p>`;
      }

    } catch (error) {
      messageDiv.innerHTML = `<p class="error">An unexpected error occurred: ${error.message}</p>`;
    }
  });
</script>



</main>



<footer>
  <ul class="footer" id="footer-internals">
    <li class="footer-item">  <a class="footer-link" href="/artists/" target="_self">Artists</a>  </li>
    <li class="footer-item">  <a class="footer-link" href="/reviews/" target="_self">Reviews</a>  </li>
    <li class="footer-item">  <a class="footer-link" href="/connect/" target="_self">Connect</a>  </li>
    <li class="footer-item">  <a class="footer-link" href="/about-us/" target="_self">About Us</a>  </li>
  </ul>
  <ul class="footer" id="footer-socials">
    <li class="footer-item" id="insta"> <a aria-label="Room To Roam Instagram account external link" class="footer-externallink" href="https://www.instagram.com/" target="_blank" rel="noopener noreferrer"><img src="/images/insta.png" alt=""></a></li>
    <li class="footer-item" id="fb"> <a aria-label="Room To Roam Facebook account external link" class="footer-externallink" href="https://www.facebook.com/" target="_blank" rel="noopener noreferrer"><img src="/images/facebook.png" alt=""></a></li>
    <li class="footer-item" id="tiktok"> <a aria-label="Room To Roam TikTok account external link" class="footer-externallink" href="https://www.tiktok.com/" target="_blank" rel="noopener noreferrer"><img src="/images/tiktok.png" alt=""></a></li>
    <li class="footer-item" id="yt"> <a aria-label="Room To Roam YouTube account external link" class="footer-externallink" href="https://www.youtube.com/" target="_blank" rel="noopener noreferrer"><img src="/images/youtube.png" alt=""></a></li>
  </ul>
</footer>

 
<script src="/scripts/loadanimation.js"></script>
<script src="/scripts/hamburger.js"></script> 
  
</body>

</html>

